<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo.png" type="image/png">
    <title>FNaF: Pixel</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            transition: all 1s ease;
            background-color: #000;
            color: #b3b3b3;
        }

        .menu {
            text-align: center;
            background-color: rgba(0, 0, 0, 0.85);
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2);
            z-index: 10;
            border: 1px solid #333;
            position: relative;
            overflow: hidden;
        }

        .menu::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                0deg,
                rgba(255, 0, 0, 0.1) 0%,
                rgba(255, 0, 0, 0) 30%
            );
            pointer-events: none;
        }

        h1 {
            color: #d3d3d3;
            margin-bottom: 30px;
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.3);
            font-weight: normal;
            letter-spacing: 2px;
        }

        .btn {
            display: block;
            width: 200px;
            padding: 12px;
            margin: 15px auto;
            font-size: 16px;
            color: #b3b3b3;
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background-color: #262626;
            color: #d3d3d3;
            border-color: #555;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2);
        }

        .btn::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transition: 0.5s;
        }

        .btn:hover::after {
            left: 100%;
        }

        .about-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .about-content {
            background-color: #111;
            padding: 30px;
            border-radius: 5px;
            max-width: 600px;
            color: #b3b3b3;
            position: relative;
            border: 1px solid #333;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.1);
            font-size: 14px;
            line-height: 1.6;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 20px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #d3d3d3;
        }

        .night-mode {
            background-color: rgba(0, 0, 0, 0.98);
        }
        
        .game-screen {
            display: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .fade-in {
            animation: fadeIn 2s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* VHS —ç—Ñ—Ñ–µ–∫—Ç */
        .vhs-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            mix-blend-mode: overlay;
            opacity: 0.15;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(255, 255, 255, 0.1),
                    rgba(255, 255, 255, 0.1) 1px,
                    transparent 1px,
                    transparent 2px
                ),
                repeating-linear-gradient(
                    90deg,
                    rgba(255, 255, 255, 0.1),
                    rgba(255, 255, 255, 0.1) 1px,
                    transparent 1px,
                    transparent 2px
                );
            animation: vhs-static 0.1s infinite;
        }

        @keyframes vhs-static {
            0% { transform: translate(0, 0); }
            20% { transform: translate(-1px, 1px); }
            40% { transform: translate(1px, -1px); }
            60% { transform: translate(1px, 1px); }
            80% { transform: translate(-1px, -1px); }
            100% { transform: translate(0, 0); }
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å–∫–∞–Ω–∏—Ä—É—é—â–∏—Ö –ª–∏–Ω–∏–π */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            background: linear-gradient(
                rgba(18, 16, 16, 0) 50%,
                rgba(0, 0, 0, 0.25) 50%
            );
            background-size: 100% 4px;
            opacity: 0.3;
        }

        /* –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –Ω–æ—á–∏ */
        .nights-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 50;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .nights-container {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
        }

        .night-btn {
            width: 100px;
            height: 100px;
            background-color: #111;
            border: 1px solid #333;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .night-btn:hover {
            border-color: #555;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2);
        }

        .night-btn.available {
            background-color: #1a1a1a;
        }

        .night-btn.locked::after {
            content: "üîí";
            position: absolute;
            font-size: 24px;
            color: rgba(255, 0, 0, 0.7);
        }

        .night-number {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .night-title {
            font-size: 14px;
        }

        .back-btn {
            margin-top: 20px;
        }

.button-container {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    display: flex;
    z-index: 200;
}

.action-btn {
    flex: 1;
    padding: 15px 0;
    background-color: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
}

.action-btn:hover {
    background-color: rgba(0, 0, 0, 0.5);
}

.action-btn:first-child {
    border-right: none;
}

.action-btn:last-child {
    border-left: none;
}

.fade-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: black;
    opacity: 0;
    z-index: 500;
    pointer-events: none;
    transition: opacity 1s;
}

/* –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Å—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤ about-content */
.about-content .btn {
    width: 100%;
    margin-top: 15px;
    background-color: #2a0a0a;
    border-color: #5a1a1a;
}

.about-content .btn:hover {
    background-color: #3a1a1a;
    border-color: #7a2a2a;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∫–∞–º–µ—Ä—ã */
.camera-effects {
    animation: cameraStatic 0.1s infinite;
}

@keyframes cameraStatic {
    0% { opacity: 0.5; }
    20% { opacity: 0.4; transform: translate(-1px, 1px); }
    40% { opacity: 0.6; transform: translate(1px, -1px); }
    60% { opacity: 0.5; transform: translate(1px, 1px); }
    80% { opacity: 0.4; transform: translate(-1px, -1px); }
    100% { opacity: 0.5; transform: translate(0, 0); }
}

.action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: rgba(0, 0, 0, 0.1) !important;
}

.puppet-meter-container {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 200px;
    height: 30px;
    background-color: rgba(0, 0, 0, 0.7);
    border: 1px solid #333;
    z-index: 200;
    display: none;
}

.puppet-meter {
    height: 100%;
    width: 100%;
    background-color: rgba(255, 0, 0, 0.5);
    transition: width 0.1s linear;
}

.puppet-button {
    position: absolute;
    top: 60px;
    right: 20px;
    padding: 8px 15px;
    background-color: rgba(0, 0, 0, 0.7);
    border: 1px solid #333;
    color: white;
    font-family: 'Courier New', monospace;
    cursor: pointer;
    z-index: 200;
    display: none;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–∞–Ω—Ç–æ–º–∞ */
.phantom {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 152; /* –ü–æ–≤–µ—Ä—Ö –∫–∞–º–µ—Ä—ã */
    pointer-events: none;
    animation: pulse 0.5s infinite alternate;
}

/* –≠—Ñ—Ñ–µ–∫—Ç—ã –º–µ—Ä—Ü–∞–Ω–∏—è –ø—Ä–∏ –∞—Ç–∞–∫–µ —Ñ–∞–Ω—Ç–æ–º–∞ */
.flicker-effect {
    animation: flicker 0.1s infinite;
}

@keyframes flicker {
    0% { background-color: rgba(255, 0, 0, 0.8); }
    10% { background-color: rgba(0, 0, 0, 0.9); }
    20% { background-color: rgba(255, 69, 0, 0.7); }
    30% { background-color: rgba(0, 0, 0, 0.8); }
    40% { background-color: rgba(255, 0, 0, 0.6); }
    50% { background-color: rgba(0, 0, 0, 0.9); }
    60% { background-color: rgba(255, 99, 71, 0.7); }
    70% { background-color: rgba(0, 0, 0, 0.8); }
    80% { background-color: rgba(255, 0, 0, 0.5); }
    90% { background-color: rgba(0, 0, 0, 0.9); }
    100% { background-color: rgba(255, 0, 0, 0.7); }
}

.disabled-buttons {
    pointer-events: none;
    opacity: 0.5;
}

.phantom-screamer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1000;
    pointer-events: none;
}

/* –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ */
.dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    padding-bottom: 20px;
}

.dialog-container {
    width: 90%;
    max-width: 800px;
    background-color: rgba(0, 0, 0, 0.7);
    border: 1px solid #333;
    border-radius: 5px;
    padding: 20px;
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
}

.dialog-character {
    position: absolute;
    bottom: 220px; /* –ù–µ–º–Ω–æ–≥–æ –ø–æ–¥–Ω—è–ª–∏ –≤—ã—à–µ */
    left: 50%;
    transform: translateX(-50%) scale(1.2); /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 20% */
    height: 360px; /* –ë—ã–ª–æ max-height: 300px, —Ç–µ–ø–µ—Ä—å —É–≤–µ–ª–∏—á–∏–ª–∏ –Ω–∞ 20% */
    z-index: 2001;
    filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
    object-fit: contain; /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
}

.dialog-name {
    color: #ff5555;
    font-size: 18px;
    margin-bottom: 10px;
    text-shadow: 0 0 3px #ff0000;
}

.dialog-text {
    color: #dddddd;
    font-size: 16px;
    line-height: 1.5;
    min-height: 60px;
}

.dialog-next {
    text-align: right;
    color: #aaaaaa;
    font-size: 14px;
    margin-top: 10px;
    animation: blink 1.5s infinite;
}

@keyframes blink {
    0% { opacity: 0.5; }
    50% { opacity: 1; }
    100% { opacity: 0.5; }
}

.win-gif {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    z-index: 2000;
    pointer-events: none;
}

    </style>
</head>
<body>
    <div class="vhs-effect"></div>
    <div class="scanlines"></div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="clickSound" src="s_click.mp3" preload="auto"></audio>
    <audio id="menuSound" src="s_menu.mp3" loop preload="auto"></audio>
    <audio id="officeSound" src="s_office.mp3" loop preload="auto"></audio>
    <audio id="randomSound" src="s_random1.mp3" preload="auto"></audio>
    <audio id="savezoneSound" src="s_savezone.mp3" preload="auto"></audio>
    <audio id="phantomSound" src="s_phantom.mp3" preload="auto"></audio>

    <div class="menu" id="mainMenu">
        <h1>FNaF: Pixel</h1>
        <button class="btn" id="playBtn">–ò–ì–†–ê–¢–¨</button>
        <button class="btn" id="aboutBtn">–û–ë –ò–ì–†–ï</button>
    </div>

    <div class="nights-menu" id="nightsMenu">
        <h2>–í–´–ë–ï–†–ò–¢–ï –ù–û–ß–¨</h2>
        <div class="nights-container" id="nightsContainer">
            <!-- –ù–æ—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
        </div>
        <button class="btn back-btn" id="backBtn">–ù–ê–ó–ê–î</button>
    </div>

    <div class="about-overlay" id="aboutOverlay">
        <div class="about-content">
            <button class="close-btn" id="closeBtn">√ó</button>
            <h2>–û–ë –ò–ì–†–ï</h2>
            <p>–≠—Ç–æ –ø–∏–∫—Å–µ–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫—É–ª—å—Ç–æ–≤–æ–π —Ñ—Ä–∞–Ω—à–∏–∑—ã FNaF, –∞–≤—Ç–æ—Ä–æ–º –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è - Scott Cawthon. –≠—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è, —Å –Ω–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π. –°–º–æ–∂–µ—à—å –ª–∏ —Ç—ã –≤—ã–∂–∏—Ç—å?</p>
            <p>–£–ü–†–ê–í–õ–ï–ù–ò–ï:</p>
            <ul>
                <li>–í—Å—ë –∑–¥–µ—Å—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–∫–∞–º–∏ –ø–æ —ç–∫—Ä–∞–Ω—É</li>
            </ul>
            <p>–°–û–í–ï–¢–´:</p>
            <ul>
                <li>–í–∫–ª—é—á–∏—Ç–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º, —ç—Ç–æ –∫–Ω–æ–ø–∫–∞ - F11. –¢–µ–º–Ω–æ—Ç–∞ —Å–Ω–∞—Ä—É–∂–∏ —É—Å–∏–ª–∏—Ç —Å—Ç—Ä–∞—Ö –≤–Ω—É—Ç—Ä–∏</li>
                <li>–ù–∞–¥–µ–Ω—å—Ç–µ –Ω–∞—É—à–Ω–∏–∫–∏ - –∫–∞–∂–¥—ã–π —à–æ—Ä–æ—Ö —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –ø—Ä—è–º–æ —É –≤–∞—Å –≤ –≥–æ–ª–æ–≤–µ</li>
                <li>–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ - –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏, —á—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ</li>
                <li>–ó–¥–µ—Å—å —Ä–µ–∑–∫–∏–µ –∑–≤—É–∫–∏ –∏ –º–µ—Ä—Ü–∞—é—â–∏–π —Å–≤–µ—Ç. –ï—Å–ª–∏ –≤—ã —É—è–∑–≤–∏–º—ã - –±–µ–≥–∏—Ç–µ, –ø–æ–∫–∞ –Ω–µ –ø–æ–∑–¥–Ω–æ</li>
                <li>–ü—Ä–∏ —Å—Ç—Ä–∞–Ω–Ω–æ—Å—Ç—è—Ö –≤ –∏–≥—Ä–µ - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å. –ù–æ —É–≤–µ—Ä–µ–Ω—ã –ª–∏ –≤—ã, —á—Ç–æ —ç—Ç–æ –±–∞–≥?</li>
                <li>–ò–≥—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ</li>
            </ul>
            <p>–í–ï–†–°–ò–Ø: FULL</p>
            <button class="btn" id="clearProgressBtn" style="margin-top: 20px;">–û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
            <p style="margin-top: 20px; font-size: 12px; color: #666;">¬© 2025 –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ - Jora young</p>
            <p style="margin-top: 20px; font-size: 12px; color: #666;">–¢–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª –ø—Ä–æ–µ–∫—Ç–∞ - https://t.me/fnafpixel</p>
        </div>
    </div>
    
    <div class="game-screen" id="gameScreen"></div>

<!-- –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ -->
<div class="dialog-overlay" id="dialogOverlay" style="display: none;">
    <img class="dialog-character" id="dialogCharacter" src="" alt="Character">
    <div class="dialog-container">
        <div class="dialog-name" id="dialogName"></div>
        <div class="dialog-text" id="dialogText"></div>
        <div class="dialog-next">–ö–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å...</div>
    </div>
</div>

    <script>
// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
window.addEventListener('beforeunload', function(e) {
    const gameScreen = document.getElementById('gameScreen');
    if (gameScreen && gameScreen.style.display === 'block') {
        e.preventDefault();
        e.returnValue = '–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?';
        return e.returnValue;
    }
});

    document.addEventListener('DOMContentLoaded', function() {
        const mainMenu = document.getElementById('mainMenu');
        const playBtn = document.getElementById('playBtn');
        const aboutBtn = document.getElementById('aboutBtn');
        const aboutOverlay = document.getElementById('aboutOverlay');
        const closeBtn = document.getElementById('closeBtn');
        const nightsMenu = document.getElementById('nightsMenu');
        const nightsContainer = document.getElementById('nightsContainer');
        const backBtn = document.getElementById('backBtn');
        const clearProgressBtn = document.getElementById('clearProgressBtn');
        const body = document.body;
        const gameScreen = document.getElementById('gameScreen');
        let currentNight = null;
        let isInCloset = false;
        let closetTimer = null;
        let fadeOverlay = null;
        let buttonContainer = null;
	let cameraBtn = null;
	let closetBtn = null;
        let isCameraOpen = false;
	let cameraImage = null;
	let cameraAnimationInterval = null;
        let puppetTimer = null;
	let puppetMeter = 0;
	let puppetMeterInterval = null;
	let isPuppetActive = false;
	let isHoldingPuppetButton = false;
	const puppetMaxMeter = 25; // 25 —Å–µ–∫—É–Ω–¥ = –ø–æ–ª–Ω–∞—è —à–∫–∞–ª–∞
	const puppetChargeRate = 2; // 1 —Å–µ–∫—É–Ω–¥–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è = 2 —Å–µ–∫—É–Ω–¥ –∑–∞—Ä—è–¥–∞
        let phantomTimer = null;
	let phantomAttackTimer = null;
	let isPhantomActive = false;
	let isPhantomAttack = false;
        const WIN_GIFS = {
    1: 'cutscene_1.gif',
    2: 'cutscene_2.gif',
    3: 'cutscene_3.gif',
    4: 'cutscene_4.gif',
    5: 'cutscene_5.gif'
};

        // –ê–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∏ –∏ —Å–∫—Ä–∏–º–µ—Ä—ã
        const animatronics = [
            { name: 'foxy', chance: 0.33, image: 'a_foxy_office.png', screamer: 'screamer_foxy.png' },
            { name: 'freddy', chance: 0.33, image: 'a_freddy_office.png', screamer: 'screamer_freddy.png' },
            { name: 'oldbonny', chance: 0.33, image: 'a_oldbonny_office.png', screamer: 'screamer_oldbonny.png' },
            { name: 'goldenfreddy', chance: 0.01, image: 'a_goldenfreddy_office.png', screamer: 'screamer_goldenfreddy.png' }
        ];

        let currentAnimatronic = null;
        let animatronicTimer = null;
        let attackTimer = null;
        const screamerSound = new Audio('s_screamer.mp3');
        screamerSound.volume = 0.7;
        
        // –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã
        const clickSound = document.getElementById('clickSound');
        const menuSound = document.getElementById('menuSound');
        const officeSound = document.getElementById('officeSound');
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
        clickSound.volume = 0.5;
        menuSound.volume = 0.3;
        officeSound.volume = 0.4;

	const musicBoxSound = new Audio('s_musicbox.mp3');
	musicBoxSound.loop = true;
	musicBoxSound.volume = 0.5;

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –º—É–∑—ã–∫—É –º–µ–Ω—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        menuSound.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:", e));
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –¥–ª—è –∑–≤—É–∫–∞
        document.addEventListener('click', function(e) {
            if (!e.target.classList.contains('volume-control')) {
                clickSound.currentTime = 0;
                clickSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –∫–ª–∏–∫–∞:", e));
            }
        });

clearProgressBtn.addEventListener('click', function() {
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
    if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –í—Å–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –Ω–æ—á–∏ –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã.")) {
        clearProgress();
        aboutOverlay.style.display = 'none';
    }
});

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ LocalStorage
        let progress = localStorage.getItem('fnafProgress') || 1;
        
        // –°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–æ—á–µ–π
        for (let i = 1; i <= 5; i++) {
            const nightBtn = document.createElement('div');
            nightBtn.className = `night-btn ${i <= progress ? 'available' : 'locked'}`;
            nightBtn.innerHTML = `
                <div class="night-number">${i}</div>
                <div class="night-title">–ù–û–ß–¨ ${i}</div>
            `;
            
            if (i <= progress) {
                nightBtn.addEventListener('click', function() {
                    startNight(i);
                });
            }
            
            nightsContainer.appendChild(nightBtn);
        }

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—Ä–∞—á–Ω—É—é –≥–∏—Ñ–∫—É –∫–∞–∫ —Ñ–æ–Ω
        body.style.backgroundImage = "url('menu.gif')";

        // –°–ª—É—á–∞–π–Ω—ã–µ –º–µ—Ä—Ü–∞–Ω–∏—è –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã
        setInterval(() => {
            if (Math.random() > 0.9) {
                mainMenu.style.boxShadow = '0 0 15px rgba(255, 0, 0, 0.4)';
                setTimeout(() => {
                    mainMenu.style.boxShadow = '0 0 10px rgba(255, 0, 0, 0.2)';
                }, 100);
            }
        }, 3000);

        playBtn.addEventListener('click', function() {
            mainMenu.style.display = 'none';
            nightsMenu.style.display = 'flex';
        });

        backBtn.addEventListener('click', function() {
    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    if (closetTimer) clearTimeout(closetTimer);
    
    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
    if (currentNight) {
        if (currentNight.hourInterval) clearInterval(currentNight.hourInterval);
        if (currentNight.randomSoundInterval) clearInterval(currentNight.randomSoundInterval);
    }
    
    nightsMenu.style.display = 'none';
    mainMenu.style.display = 'block';
    
    if (menuSound.paused) {
        menuSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É –º–µ–Ω—é:", e));
    }
    
    if (!officeSound.paused) {
        officeSound.pause();
        officeSound.currentTime = 0;
    }
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∫–∞—Ñ–∞
    isInCloset = false;
    if (buttonContainer && closetBtn) {
        closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
    }
    if (buttonContainer && cameraBtn) {
        cameraBtn.style.display = 'block';
    }
});

function addClockStyles() {
    const style = document.createElement('style');
    style.textContent = `
        .game-clock {
            position: fixed;
            top: 20px;
            left: 20px;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 3px;
            z-index: 100;
        }
    `;
    document.head.appendChild(style);
}

function spawnPhantom() {
    if (isPhantomActive || isPhantomAttack) return;
    
    isPhantomActive = true;
    
    // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–Ω—Ç–æ–º–∞
    const phantom = document.createElement('img');
    phantom.src = 'screamer_phantompuppet.png';
    phantom.className = 'phantom';
    phantom.id = 'phantom-image'; // –î–æ–±–∞–≤–ª—è–µ–º ID –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    gameScreen.appendChild(phantom);
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –∞—Ç–∞–∫–∏ (1 —Å–µ–∫—É–Ω–¥–∞)
    phantomAttackTimer = setTimeout(() => {
        if (isPhantomActive && !isPhantomAttack) {
            triggerPhantomAttack();
        }
    }, 1000);
}

function removePhantom() {
    if (!isPhantomActive && !isPhantomAttack) return;
    
    isPhantomActive = false;
    clearTimeout(phantomAttackTimer);
    
    // –£–¥–∞–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–Ω—Ç–æ–º–∞
    const phantom = document.getElementById('phantom-image');
    if (phantom && phantom.parentNode) {
        phantom.parentNode.removeChild(phantom);
    }
    
    // –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
    const screamerImg = document.getElementById('phantom-screamer-img');
    if (screamerImg && screamerImg.parentNode) {
        screamerImg.parentNode.removeChild(screamerImg);
    }
    
    // –£–¥–∞–ª—è–µ–º overlay –º–µ—Ä—Ü–∞–Ω–∏—è
    const flicker = document.getElementById('phantom-flicker-overlay');
    if (flicker && flicker.parentNode) {
        flicker.parentNode.removeChild(flicker);
    }
}

function triggerPhantomAttack() {
    if (isPhantomAttack) return;
    
    isPhantomAttack = true;
    isPhantomActive = false;
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–º–µ—Ä—É –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
    forceCloseCamera();
    
    // –£–¥–∞–ª—è–µ–º –æ–±—ã—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–Ω—Ç–æ–º–∞
    removePhantom();
    
    // –°–æ–∑–¥–∞–µ–º overlay –¥–ª—è –º–µ—Ä—Ü–∞–Ω–∏—è
    const flickerOverlay = document.createElement('div');
    flickerOverlay.id = 'phantom-flicker-overlay';
    flickerOverlay.style.position = 'fixed';
    flickerOverlay.style.top = '0';
    flickerOverlay.style.left = '0';
    flickerOverlay.style.width = '100%';
    flickerOverlay.style.height = '100%';
    flickerOverlay.style.zIndex = '9999';
    flickerOverlay.style.pointerEvents = 'none';
    flickerOverlay.style.animation = 'flicker 0.1s infinite';
    gameScreen.appendChild(flickerOverlay);
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —Ñ–∞–Ω—Ç–æ–º–∞
    const phantomSound = document.getElementById('phantomSound');
    phantomSound.currentTime = 0;
    phantomSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —Ñ–∞–Ω—Ç–æ–º–∞:", e));
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫—Ä–∏–º–µ—Ä –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
    const screamer = document.createElement('img');
    screamer.id = 'phantom-screamer-img';
    screamer.src = 'screamer_phantompuppet.png';
    screamer.className = 'phantom-screamer';
    gameScreen.appendChild(screamer);
    
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
    buttonContainer.classList.add('disabled-buttons');
    
    // –ß–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ —É–±–∏—Ä–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
    setTimeout(() => {
        // –£–¥–∞–ª—è–µ–º overlay –º–µ—Ä—Ü–∞–Ω–∏—è
        const flicker = document.getElementById('phantom-flicker-overlay');
        if (flicker && flicker.parentNode) {
            flicker.parentNode.removeChild(flicker);
        }
        
        // –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–º–µ—Ä
        const screamerImg = document.getElementById('phantom-screamer-img');
        if (screamerImg && screamerImg.parentNode) {
            screamerImg.parentNode.removeChild(screamerImg);
        }
        
        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
        buttonContainer.classList.remove('disabled-buttons');
        
        isPhantomAttack = false;
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—ã—á–Ω—ã–π —Ñ–æ–Ω –æ—Ñ–∏—Å–∞
        gameScreen.style.backgroundImage = "url('office.gif')";
    }, 10000);
}

function forceCloseCamera() {
    if (!isCameraOpen) return;
    
    isCameraOpen = false;
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–∞–º–µ—Ä—ã
    if (cameraAnimationInterval) {
        clearInterval(cameraAnimationInterval);
        cameraAnimationInterval = null;
    }
    
    // –£–±–∏—Ä–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–º–µ—Ä—ã
    removeCameraEffects();
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã
    musicBoxSound.pause();
    musicBoxSound.currentTime = 0;
    
    // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∑–≤—É–∫ –æ—Ñ–∏—Å–∞
    officeSound.currentTime = 0;
    officeSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∑–≤—É–∫ –æ—Ñ–∏—Å–∞:", e));

    // –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏
    const meterContainer = document.querySelector('.puppet-meter-container');
    const puppetBtn = document.querySelector('.puppet-button');
    if (meterContainer) meterContainer.style.display = 'none';
    if (puppetBtn) puppetBtn.style.display = 'none';
    
    // –£–¥–∞–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
    if (cameraImage && cameraImage.parentNode) {
        cameraImage.parentNode.removeChild(cameraImage);
        cameraImage = null;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —à–∫–∞—Ñ–∞
    if (closetBtn) closetBtn.style.display = 'block';
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
    if (cameraBtn) cameraBtn.textContent = '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–º–µ—Ä—É';
}

function openCamera() {
    if (isCameraOpen || isInCloset) return;
    
    clickSound.play();
    isCameraOpen = true;
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –æ—Ñ–∏—Å–∞
    officeSound.pause();
    officeSound.currentTime = 0;
    
    // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —à–∫–∞—Ñ–∞
    closetBtn.style.display = 'none';

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏
    const meterContainer = document.querySelector('.puppet-meter-container');
    const puppetBtn = document.querySelector('.puppet-button');
    if (meterContainer) {
        meterContainer.style.display = 'block';
        updatePuppetMeter();
    }
    if (puppetBtn) puppetBtn.style.display = 'block';
    
    // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
    cameraImage = document.createElement('img');
    cameraImage.src = 'camera.png';
    cameraImage.style.position = 'absolute';
    cameraImage.style.top = '-1%';
    cameraImage.style.left = '-25%';
    cameraImage.style.width = '150%';
    cameraImage.style.height = '150%';
    cameraImage.style.objectFit = 'cover';
    cameraImage.style.zIndex = '150';
    cameraImage.style.transform = 'translateX(100%)';
    cameraImage.style.transition = 'transform 0.1s ease-in-out';
    
    gameScreen.appendChild(cameraImage);
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã
    setTimeout(() => {
        cameraImage.style.transform = 'translateX(0)';
        
        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã
        musicBoxSound.currentTime = 0;
        musicBoxSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã:", e));
     
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Ñ–∞–Ω—Ç–æ–º–∞ (8% —à–∞–Ω—Å)
        if (Math.random() < 0.08 && !isPhantomActive) {
            spawnPhantom();
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–º–µ—Ä—ã
        addCameraEffects();
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã (–≤–ø—Ä–∞–≤–æ-–≤–ª–µ–≤–æ)
        startCameraAnimation();
        
        // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        cameraBtn.textContent = '–í—ã–π—Ç–∏ –∏–∑ –∫–∞–º–µ—Ä—ã';
    }, 100);
}

function startPuppetMechanic() {
    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç
    let meterContainer = document.querySelector('.puppet-meter-container');
    let puppetBtn = document.querySelector('.puppet-button');
    
    if (!meterContainer) {
        meterContainer = document.createElement('div');
        meterContainer.className = 'puppet-meter-container';
        meterContainer.innerHTML = '<div class="puppet-meter" style="width: 100%"></div>';
        gameScreen.appendChild(meterContainer);
    }
    
    if (!puppetBtn) {
        puppetBtn = document.createElement('button');
        puppetBtn.className = 'puppet-button';
        puppetBtn.textContent = '–ó–∞—Ä—è–¥–∏—Ç—å —à–∫–∞—Ç—É–ª–∫—É';
        puppetBtn.addEventListener('mousedown', startChargingPuppet);
        puppetBtn.addEventListener('mouseup', stopChargingPuppet);
        puppetBtn.addEventListener('mouseleave', stopChargingPuppet);
        gameScreen.appendChild(puppetBtn);
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ –≤ –∫–∞–º–µ—Ä–µ
    meterContainer.style.display = 'none';
    puppetBtn.style.display = 'none';
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç—Å—á–µ—Ç —à–∫–∞–ª—ã
    puppetMeter = puppetMaxMeter;
    updatePuppetMeter();
    isPuppetActive = true;
    puppetMeterInterval = setInterval(decreasePuppetMeter, 1000);
}

function decreasePuppetMeter() {
    if (isHoldingPuppetButton) {
        // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –∑–∞–∂–∞—Ç–∞, –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞—Ä—è–¥
        puppetMeter = Math.min(puppetMeter + puppetChargeRate, puppetMaxMeter);
    } else {
        // –ï—Å–ª–∏ –Ω–µ –∑–∞–∂–∞—Ç–∞ - —É–º–µ–Ω—å—à–∞–µ–º
        puppetMeter -= 1;
    }
    updatePuppetMeter();
    
    if (puppetMeter <= 0) {
        triggerPuppetAttack();
    }
}

function updatePuppetMeter() {
    const meter = document.querySelector('.puppet-meter');
    if (meter) {
        const percentage = (puppetMeter / puppetMaxMeter) * 100;
        meter.style.width = `${percentage}%`;
    }
}

function startChargingPuppet() {
    if (isCameraOpen) {
        isHoldingPuppetButton = true;
        // –£–¥–∞–ª—è–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∂–∞—Ç–∏–∏
        if (!isHoldingPuppetButton) {
            puppetMeter = Math.min(puppetMeter + puppetChargeRate, puppetMaxMeter);
            updatePuppetMeter();
        }
    }
}

function stopChargingPuppet() {
    isHoldingPuppetButton = false;
}

function triggerPuppetAttack() {
    // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
    clearInterval(puppetMeterInterval);
    isPuppetActive = false;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫—Ä–∏–º–µ—Ä
    const screamer = document.createElement('img');
    screamer.src = 'screamer_puppet.png';
    screamer.className = 'screamer';
    screamer.style.position = 'absolute';
    screamer.style.top = '0';
    screamer.style.left = '0';
    screamer.style.width = '100%';
    screamer.style.height = '100%';
    screamer.style.objectFit = 'cover';
    screamer.style.zIndex = '1000';
    
    gameScreen.appendChild(screamer);
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —Å–∫—Ä–∏–º–µ—Ä–∞
    screamerSound.currentTime = 0;
    screamerSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —Å–∫—Ä–∏–º–µ—Ä–∞:", e));
    
    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    if (closetTimer) clearTimeout(closetTimer);
    
    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
    if (currentNight) {
        if (currentNight.hourInterval) clearInterval(currentNight.hourInterval);
        if (currentNight.randomSoundInterval) clearInterval(currentNight.randomSoundInterval);
    }
    
    // –ó–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        gameScreen.style.display = 'none';
        nightsMenu.style.display = 'flex';
        nightsMenu.style.opacity = '1';
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –º–µ–Ω—é
        body.style.backgroundImage = "url('menu.gif')";
        body.classList.remove('night-mode');
        
        // –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–º–µ—Ä
        const existingScreamer = document.querySelector('.screamer');
        if (existingScreamer) existingScreamer.remove();
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∑–≤—É–∫–∏ –∏–≥—Ä—ã
        officeSound.pause();
        officeSound.currentTime = 0;
        musicBoxSound.pause();
        musicBoxSound.currentTime = 0;
        const savezoneSound = document.getElementById('savezoneSound');
        savezoneSound.pause();
        savezoneSound.currentTime = 0;
        
        // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –º–µ–Ω—é
        menuSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –º–µ–Ω—é:", e));
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∫–∞—Ñ–∞ –∏ –∫–∞–º–µ—Ä—ã
        isInCloset = false;
        isCameraOpen = false;
        if (buttonContainer && closetBtn) {
            closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
        }
        if (buttonContainer && cameraBtn) {
            cameraBtn.style.display = 'block';
            cameraBtn.textContent = '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–º–µ—Ä—É';
        }
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–µ—Ö–∞–Ω–∏–∫—É –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏
        resetPuppetMechanic();
    }, 1500);
}

function resetPuppetMechanic() {
    if (puppetMeterInterval) clearInterval(puppetMeterInterval);
    isPuppetActive = false;
    puppetMeter = 0;
    isHoldingPuppetButton = false;
    
    const meterContainer = document.querySelector('.puppet-meter-container');
    const puppetBtn = document.querySelector('.puppet-button');
    
    if (meterContainer) {
        meterContainer.style.display = 'none';
        updatePuppetMeter(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à–∫–∞–ª—ã
    }
    if (puppetBtn) {
        puppetBtn.style.display = 'none';
    }
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–º–µ—Ä—ã
function closeCamera() {
    removePhantom();
    if (!isCameraOpen) return;
    
    clickSound.play();
    isCameraOpen = false;
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–∞–º–µ—Ä—ã
    if (cameraAnimationInterval) {
        clearInterval(cameraAnimationInterval);
        cameraAnimationInterval = null;
    }
    
    // –£–±–∏—Ä–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–∞–º–µ—Ä—ã
    removeCameraEffects();
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã
    musicBoxSound.pause();
    musicBoxSound.currentTime = 0;
    
    // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∑–≤—É–∫ –æ—Ñ–∏—Å–∞
    officeSound.currentTime = 0;
    officeSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∑–≤—É–∫ –æ—Ñ–∏—Å–∞:", e));

    // –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏
    const meterContainer = document.querySelector('.puppet-meter-container');
    const puppetBtn = document.querySelector('.puppet-button');
    if (meterContainer) meterContainer.style.display = 'none';
    if (puppetBtn) puppetBtn.style.display = 'none';
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–º–µ—Ä—ã
    cameraImage.style.transform = 'translateX(100%)';
    
    setTimeout(() => {
        if (cameraImage && cameraImage.parentNode) {
            cameraImage.parentNode.removeChild(cameraImage);
            cameraImage = null;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —à–∫–∞—Ñ–∞
        closetBtn.style.display = 'block';
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        cameraBtn.textContent = '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–º–µ—Ä—É';
    }, 500);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã
function toggleCamera() {
    // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (–∏–¥–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—è) - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    if (cameraBtn.disabled) return;
    
    // –ï—Å–ª–∏ –∏–¥–µ—Ç –∞—Ç–∞–∫–∞ —Ñ–∞–Ω—Ç–æ–º–∞ - –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ–º
	if (isPhantomAttack) return;

    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
    cameraBtn.disabled = true;
    closetBtn.disabled = true;
    
    if (isCameraOpen) {
        closeCamera();
    } else {
        openCamera();
    }
    
    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (500ms)
    setTimeout(() => {
        cameraBtn.disabled = false;
        closetBtn.disabled = false;
    }, 500);
}

// –§—É–Ω–∫—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã (–¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ-–≤–ª–µ–≤–æ)
function startCameraAnimation() {
    let direction = -1; // -1 –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –≤–ª–µ–≤–æ, 1 –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø—Ä–∞–≤–æ
    let currentPos = 0;
    const maxOffset = 30; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
    
    cameraAnimationInterval = setInterval(() => {
        currentPos += direction * 2;
        
        if (Math.abs(currentPos) >= maxOffset) {
            direction *= -1; // –ú–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        }
        
        cameraImage.style.transform = `translateX(${currentPos}px)`;
    }, 50);
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∫–∞–º–µ—Ä—ã
function addCameraEffects() {
    const cameraEffects = document.createElement('div');
    cameraEffects.className = 'camera-effects';
    cameraEffects.style.position = 'absolute';
    cameraEffects.style.top = '0';
    cameraEffects.style.left = '0';
    cameraEffects.style.width = '100%';
    cameraEffects.style.height = '100%';
    cameraEffects.style.zIndex = '151';
    cameraEffects.style.pointerEvents = 'none';
    cameraEffects.style.background = `
        repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) 1px, transparent 1px, transparent 2px),
        repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3) 1px, transparent 1px, transparent 2px)
    `;
    cameraEffects.style.opacity = '0.5';
    
    gameScreen.appendChild(cameraEffects);
}

// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∫–∞–º–µ—Ä—ã
function removeCameraEffects() {
    const effects = document.querySelector('.camera-effects');
    if (effects && effects.parentNode) {
        effects.parentNode.removeChild(effects);
    }
}

// –µ—Å–ª–∏ –∂–µ–ª–∞–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ, –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª—Å —Ñ—Ä–∞–∑—É - –§–ù–ê–§ –ü–ò–ö–°–ï–õ–¨ 2 –î–û–õ–ñ–ï–ù –°–£–©–ï–°–¢–í–û–í–ê–¢–¨

// –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —á–∞—Å–æ–≤
function createClockElement() {
    const clock = document.createElement('div');
    clock.className = 'game-clock';
    clock.textContent = '00:00';
    return clock;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
function updateGameTime(clockElement, currentHour) {
    const formattedHour = currentHour.toString().padStart(2, '0');
    clockElement.textContent = `${formattedHour}:00`;
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–µ–º
function startGameClock(nightNumber) {
    addClockStyles();
    const clockElement = createClockElement();
    gameScreen.appendChild(clockElement);
    
    let currentHour = 0;
    updateGameTime(clockElement, currentHour);
    
    // 1 –∏–≥—Ä–æ–≤–æ–π —á–∞—Å = 50 —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ–∫—É–Ω–¥
    const hourInterval = setInterval(() => {
        currentHour++;
        updateGameTime(clockElement, currentHour);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª –ª–∏ –ø–æ–±–µ–¥–Ω—ã–π —á–∞—Å
        if (currentHour === 6) {
            handleWinCondition(nightNumber, hourInterval, clockElement);
        }
    }, 50000); // 50 —Å–µ–∫—É–Ω–¥
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º interval ID –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∫–∏
    return hourInterval;
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–±–µ–¥—ã (6 —á–∞—Å–æ–≤)
function handleWinCondition(nightNumber, hourInterval, clockElement) {
    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏
    clearInterval(hourInterval);
    resetPuppetMechanic();
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –ø–æ–±–µ–¥—ã
    const winSound = new Audio('s_win.mp3');
    winSound.volume = 1.0;
    winSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –ø–æ–±–µ–¥—ã:", e));
    
    // –î–µ–ª–∞–µ–º –∏–≥—Ä–æ–∫–∞ –Ω–µ—É—è–∑–≤–∏–º—ã–º
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    const existingAnim = document.querySelector('.animatronic');
    if (existingAnim) existingAnim.remove();
    const existingScreamer = document.querySelector('.screamer');
    if (existingScreamer) existingScreamer.remove();
    
    // –ß–µ—Ä–µ–∑ 7 —Å–µ–∫—É–Ω–¥ –∑–∞–≤–µ—Ä—à–∞–µ–º –Ω–æ—á—å
    setTimeout(() => {
        clockElement.remove();
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –º–µ–Ω—é
        body.style.backgroundImage = "url('menu.gif')";
        body.classList.remove('night-mode');
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫–∏ –æ—Ñ–∏—Å–∞
        officeSound.pause();
        officeSound.currentTime = 0;
        
        // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –º–µ–Ω—é
        menuSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –º–µ–Ω—é:", e));
        
        completeNight(nightNumber);
    }, 7000);
}

// –î–∏–∞–ª–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ—á–∏
const nightDialogs = {
    1: {
        character: "eva_1.gif",
        lines: [
            { name: "???", text: "–û, –ø—Ä–∏–≤–µ—Ç, —ç—Ç–æ —Ç—ã –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é?" },
            { name: "–í—ã", text: "–î–∞, —è" },
            { name: "???", text: "–í –æ–±—â–µ–º, –¥–µ—Ä–∂–∏ –∫–ª—é—á–∏, –∏ —á—Ç–æ —Ç—ã —Ç–∞–∫ –ª–µ–≥–∫–æ –æ–¥–µ—Ç? –¢–∞–º —Ö–æ–ª–æ–¥–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ" },
            { name: "–í—ã", text: "–ó–∞—á–µ–º –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ?" },
            { name: "???", text: "–ú–º–º, –Ω–µ —Ç–∞–∫ –≤–∞–∂–Ω–æ, –ª—É—á—à–µ —Å–ª—É—à–∞–π, —Ç–≤–æ—è —Å–º–µ–Ω–∞ –∫–∞–∫ —è –∏ –≥–æ–≤–æ—Ä–∏–ª–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —ç—Ç–æ 00:00 - 06:00, –≤ 6 —É—Ç—Ä–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—à—å –ø–∏—Ü—Ü–µ—Ä–∏—é –∏ –µ–∑–∂–∞–π –¥–∞–º–æ–π"  },
            { name: "???", text: "–î–∞ –∏ –µ—â—ë, –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ä–∞–±–æ—á–∏–º –¥–Ω—ë–º –±—É–¥–µ–º –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –≤ 00:00 —Ç—É—Ç, –Ω—É —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ —Ç–∞–∫ —Å–∫–∞–∂–µ–º, –º–µ–Ω—è –∫—Å—Ç–∞—Ç–∏ –ï–≤–∞ –∑–æ–≤—É—Ç" },
            { name: "–ï–≤–∞", text: "–î—É–º–∞—é, –≤—Å—ë –ø–æ–Ω—è–ª? –¢—É—Ç —Ç–∞–∫ —Ö–æ–ª–æ–¥–Ω–æ –∂—É—Ç—å, –∏ –º–æ–≥–ª–∏ –±—ã –æ—Å–≤–µ—â–µ–Ω–∏–µ —Ç—É—Ç —Å–¥–µ–ª–∞—Ç—å, –º–¥–∞, –ª–∞–¥–Ω–æ –¥–∞–≤–∞–π –ø–æ–∫–∞" },
            { name: "–í—ã", text: "–î–∞ —Å—Ç–æ–π, –ø–æ–≥–æ–¥–∏, –Ω—É —Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–π –∑–∞ —Ä–∞–±–æ—Ç—É" },
            { name: "–ï–≤–∞", text: "–ê—Ö, –Ω—É –¥–∞–≤–∞–π —Ä–∞—Å—Å–∫–∞–∂—É" },
            { name: "–ï–≤–∞", text: "–í –æ–±—â–µ–º —ç—Ç–∞ –ø–∏—Ü—Ü–µ—Ä–∏—è, –±—ã–ª–∞ –æ—á–µ–Ω—å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –≤ 2010-—Ö –∑–∞ —Å—á—ë—Ç —Å–≤–æ–∏—Ö –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤" },
            { name: "–í—ã", text: "–ó–∞ —Å—á—ë—Ç –∫–æ–≥–æ?" },
            { name: "–ï–≤–∞", text: "–ù—É –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –∏—Ö —Ä–æ–±–æ—Ç–∞–º–∏" },
            { name: "–ï–≤–∞", text: "–û–Ω–∏ —Ö–æ–¥–∏–ª–∏ –±—Ä–æ–¥–∏–ª–∏, –∏ –¥–µ—Ç—è–º –Ω—Ä–∞–≤–∏–ª–æ—Å—å, –Ω–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–ª–∏. –ê —Å–µ–π—á–∞—Å –æ–Ω–∏ –∏–Ω–æ–≥–¥–∞ —Ö–æ–¥—è—Ç –ø–æ –∑–∞–≤–µ–¥–µ–Ω–∏—é" },
            { name: "–ï–≤–∞", text: "–ò —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–∞—è, –∏ –Ω—É–∂–Ω–æ –æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö –æ—Ç –≤–æ—Ä–æ–≤ –∏ –≤–∞–Ω–¥–∞–ª–æ–≤, —Å–ø—Ä–∞–≤–∏—à—å—Å—è?" },
            { name: "–ï–≤–∞", text: "–ï—Å–ª–∏ —Ä–æ–±–æ—Ç—ã –∫ —Ç–µ–±–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, —Ç–æ –∑–∞–ª–µ–∑—å –≤ —à–∫–∞—Ñ, –æ–Ω–∏ –Ω–µ –Ω–∞–π–¥—É—Ç –Ω–∞–≤–µ—Ä–Ω–æ–µ, –Ω–æ –µ—Å—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–Ω—Å —á—Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –ø–æ–º–æ—á—å, –Ω–æ –Ω–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π" },
            { name: "–ï–≤–∞", text: "–ê—Ö, —Ç–∞–∫-–∂–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫—Ä—É—á–∏–≤–∞—Ç—å —à–∫–∞—Ç—É–ª–∫—É –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ –∑–ª–∏–ª–∞—Å—å" },
            { name: "–í—ã", text: "–ê –ø–æ—á–µ–º—É —É–≤–æ–ª–∏–ª—Å—è –ø—Ä–æ—à–ª—ã–π –æ—Ö—Ä–∞–Ω–Ω–∏–∫?" },
            { name: "–ï–≤–∞", text: "–ù—É, —É –Ω–µ–≥–æ –Ω–∞—á–∞–ª–∏—Å—å –ø–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏, –ø—Ä–æ—Å—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Ç–∞–º, —Å—Ç—Ä–µ—Å—Å, –æ–Ω –Ω–∞—á–∞–ª –≤–∏–¥–µ—Ç—å –º–∞—Ä–∏–æ–Ω–µ—Ç–∫—É –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π, –Ω—É –±—Ä–µ–¥–∏—Ç—å –∫–æ—Ä–æ—á–µ" },
            { name: "–ï–≤–∞", text: "–ü—Ä–æ—Å—Ç–æ –µ—Å–ª–∏ –Ω–∞—á–Ω—É—Ç –ø–ª—ã—Ç—å –≥–ª–∞–∑–∞, —Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–ª–∞–Ω—à–µ—Ç —Å –∫–∞–º–µ—Ä–∞–º–∏ —É–±–µ—Ä–∏, –∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –±—É–¥–µ—Ç" },
            { name: "–ï–≤–∞", text: "–î–∞–≤–∞–π, –Ω–∞–¥–µ—é—Å—å, –∑–∞–≤—Ç—Ä–∞ –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è —Ç—É—Ç –ø–µ—Ä–µ–¥ —Ç–≤–æ–µ–π —Å–º–µ–Ω–æ–π, –¥–∞–≤–∞–π —É–¥–∞—á–∏" },
        ]
    },
    2: {
        character: "eva_2.gif",
        lines: [
            { name: "–í—ã", text: "–≠—Ç–æ —á—Ç–æ –±—ã–ª–æ –≤—á–µ—Ä–∞? –î–∞ –æ–Ω–∏ —Å–ª–æ–≤–Ω–æ —É–±–∏—Ç—å –º–µ–Ω—è —Ö–æ—Ç—è—Ç! –Ø –ø–µ—Ä–µ–∂–∏–≤–∞—é, —è —É–≤–æ–ª—å–Ω—è—é—Å—å, —è –Ω–µ –±—É–¥—É —Ç—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!" },
            { name: "–ï–≤–∞", text: "–ü–æ–¥–æ–∂–¥–∏ –¥–∞–≤–∞–π –ø–æ –ø–æ—Ä—è–¥–∫—É. –î–∞, —è –ø—Ä–∏–∑–Ω–∞—é—Å—å, —á—Ç–æ —Ç–∞–º —Ä–µ–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ" },
            { name: "–ï–≤–∞", text: "–ù–æ –º–Ω–µ –Ω–µ–∫–æ–≥–æ –±–æ–ª—å—à–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å, –µ—Å–ª–∏ —Ç—ã —É–≤–æ–ª–∏—à—å—Å—è, —Ç–æ —è –≤ —Ç–≤–æ–µ–π —Ç—Ä—É–¥–æ–≤–æ–π –∫–Ω–∏–∂–∫–µ –ø–∞–∫–æ—Å—Ç–∏ —Ç–µ–±–µ –Ω–∞–ø–∏—à—É, —Ç–µ–±—è –±–æ–ª—å—à–µ –Ω–∏–∫—Ç–æ –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ –≤–æ–∑—å–º—ë—Ç. –¢–∞–∫ —á—Ç–æ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –±—É–¥—å –¥–æ–±—Ä, –æ—Ç—Ä–∞–±–æ—Ç–∞–π —Å–≤–æ—ë" },
            { name: "–í—ã", text: "–¢—ã –≤–æ–æ–±—â–µ –≤ –∑–¥—Ä–∞–≤–æ–º —É–º–µ? –¢—ã –±—É–¥–µ—à—å —à–∞–Ω—Ç–∞–∂–∏—Ä–æ–≤–∞—Ç—å, —Å—Ç–∞–≤—è –Ω–∞ –≤–µ—Å—ã –º–æ—é –∂–∏–∑–Ω—å?" },
            { name: "–ï–≤–∞", text: "–≠–π, –Ω—É —É —Ç–µ–±—è –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ –ø–æ—Å–ª–µ" },
            { name: "–í—ã", text: "–î–∞ —è –ª–∏—Å—Ç–æ–≤–∫–∏ —Ä–∞–∑–¥–∞–≤–∞—è –∑–∞—Ä–∞–±–æ—Ç–∞–ª –±—ã –±–æ–ª—å—à–µ" },
            { name: "–ï–≤–∞", text: "–õ–∞–¥–Ω–æ, –≥–æ–≤–æ—Ä—é –∫–∞–∫ –µ—Å—Ç—å, —è –≤–ª–∞–¥–µ–ª–µ—Ü —ç—Ç–æ–≥–æ –∑–¥–∞–Ω–∏—è, –æ–Ω–æ –º–Ω–µ –¥–æ—Å—Ç–∞–ª–æ—Å—å –≤ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ, –∏ —è —Ö–æ—á—É –ø–æ–±—ã—Å—Ç—Ä–µ–µ –µ–≥–æ –ø—Ä–æ–¥–∞—Ç—å, —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ –∏—â—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" },
            { name: "–ï–≤–∞", text: "–î–∞–≤–∞–π –∑–∞–º–æ—Ç–∏–≤–∏—Ä—É—é —Ç–µ–±—è, –≤–æ–∑–º–æ–∂–Ω–æ —è –∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–º —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é –ø—Ä–∏–º–µ—Ä–Ω–æ, –∏ —Ä–∞–±–æ—Ç–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è, –∏ –µ—â—ë —è –¥–∞–º –Ω–µ–ø–ª–æ—Ö–∏–µ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ —Ç–µ–±–µ –µ—Å–ª–∏ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—à—å –¥–æ –∫–æ–Ω—Ü–∞" },
            { name: "–ï–≤–∞", text: "–¢—ã –Ω–µ –ø–æ–≤–µ—Ä–∏—à—å, —è —É–∂–µ —Å —É–º–∞ —Å—Ö–æ–∂—É, –≤ –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏ —Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º, –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –ø–æ–ª–Ω–æ, –¥–∞ –∏ –æ—Ç —ç—Ç–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è —Å—Ç–æ–ª—å–∫–æ –±–µ–¥, —è —Å–∞–º–∞ –ø—Ä–æ—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é –≤–∏–Ω—É, —É–∂–µ —Å—Ç–æ–ª—å–∫–æ –æ—Ö—Ä–∞–Ω–∏–∫–æ–≤ —Ç—É—Ç –ø–æ–≥–∏–±–ª–æ... –û–π" },
            { name: "–í—ã", text: "–ü–û–ì–ò–ë–õ–û!? –û–Ω–∏ —Ä–µ–∞–ª—å–Ω–æ —É–±–∏–≤–∞—é—Ç?" },
            { name: "–ï–≤–∞", text: "–î–∞, –Ω–µ —Ö–æ—Ç–µ–ª–∞ –≥–æ–≤–æ—Ä–∏—Ç—å, –Ω–æ –ø—Ä–∏—à–ª–æ—Å—å, –ø—Ä–æ—Å—Ç–∏ –∑–∞ —ç—Ç–æ –≤—Å—ë, –Ω–æ —Ç–µ–ø–µ—Ä—å –º—ã –∫–æ–º–∞–Ω–¥–∞, —Ç—ã –º–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥—Ä—É–≥, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∂–∏—Ç—å —ç—Ç–æ—Ç –∫–æ—à–º–∞—Ä" },
        ]
    },
    3: {
        character: "eva_3.gif",
        lines: [
            { name: "–ï–≤–∞", text: "–ü—Ä–∏–≤–µ—Ç" },
            { name: "–í—ã", text: "–ü—Ä–∏–≤–µ—Ç" },
            { name: "–ï–≤–∞", text: "–°–ª—É—à–∞–π, –º–Ω–µ —Ä–µ–∞–ª—å–Ω–æ —Å—Ç—ã–¥–Ω–æ –∑–∞ –≤—á–µ—Ä–∞—à–Ω–µ–µ, –∏–∑–≤–∏–Ω–∏ –∑–∞ —à–∞–Ω—Ç–∞–∂, –º–Ω–µ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–æ –æ—á–µ–Ω—å —Å—Ç—ã–¥–Ω–æ –∑–∞ —ç—Ç–æ" },
            { name: "–ï–≤–∞", text: "–ò –µ—â—ë —è –ø–µ—Ä–µ–∂–∏–≤–∞–ª–∞ –∑–∞ —Ç–µ–±—è, —Ç—ã –º–Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫, —Ç–∞–∫ —á—Ç–æ –º–Ω–µ –µ—Å—Ç—å —Ç–µ–±–µ —á—Ç–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å" },
            { name: "–ï–≤–∞", text: "–í –¥–µ—Ç—Å—Ç–≤–µ, —è –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–æ–¥–∏–ª–∞ –≤ —ç—Ç–æ–º –∑–∞–≤–µ–¥–µ–Ω–∏–∏, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–æ –º–æ–∏–º —Ä–æ–¥–∏—Ç–µ–ª—è–º, –∏ –æ–Ω–æ –º–Ω–µ —Ä–µ–∞–ª—å–Ω–æ –Ω—Ä–∞–≤–∏–ª–æ—Å—å" },
            { name: "–ï–≤–∞", text: "–Ø —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –∫–∞–∫—É—é-—Ç–æ –≥–æ—Ä–¥–æ—Å—Ç—å, —á—Ç–æ —Å–∞–º–æ–µ –ª—é–±–∏–º–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –º–æ–∏—Ö –¥—Ä—É–∑–µ–π, –±—ã–ª–æ —á–∞—Å—Ç–∏—á–Ω–æ –º–æ–∏–º" },
            { name: "–í—ã", text: "–ù—É —Å–µ–π—á–∞—Å –æ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–≤–æ—ë" },
            { name: "–ï–≤–∞", text: "–¢–µ–ø–µ—Ä—å —è —Å–æ–∂–∞–ª–µ—é —á—Ç–æ –æ–Ω–æ —Å—Ç–∞–ª–æ –º–æ–∏–º, –ª–∞–¥–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—é" },
            { name: "–ï–≤–∞", text: "–ú–æ–π –ø–∞–ø–∞ —Å–æ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º, –∞–≤—Ç–æ—Ä —ç—Ç–∏—Ö –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤, –≤—Å–µ–º –±—ã–ª–æ –≤–µ—Å–µ–ª–æ, –ø–æ–∫–∞ –≤ –ø–∏—Ü—Ü–µ—Ä–∏–∏ –Ω–µ –Ω–∞—á–∞–ª–∏ –ø—Ä–æ–ø–∞–¥–∞—Ç—å –¥–µ—Ç–∏" },
            { name: "–ï–≤–∞", text: "–î–µ—Ç–∏ –ø—Ä–æ–ø–∞–¥–∞–ª–∏ –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º, –∞ –ø–æ—Å–ª–µ –±—ã–ª–∞ —É–±–∏—Ç–∞ –º–æ—è –º–∞–º–∞, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–ª –∫—Ç–æ —É–±–∏–π—Ü–∞" },
            { name: "–ï–≤–∞", text: "–í—Å–µ–≥–æ –ø–æ–≥–∏–±–ª–æ —á–µ—Ç—ã—Ä–µ —Ä–µ–±—ë–Ω–∫–∞ –∏ –æ–¥–Ω–∞ –∂–µ–Ω—â–∏–Ω–∞, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–∏—Ü—Ü–µ—Ä–∏—é –∑–∞–∫—Ä—ã–ª–∏, —è –±—ã–ª–∞ –≤ —à–æ–∫–µ, –∫–æ–≥–¥–∞ —É–∑–Ω–∞–ª–∞ —á—Ç–æ —É–±–∏–π—Ü–∞ - –º–æ–π –ø–∞–ø–∞" },
            { name: "–í—ã", text: "..." },
            { name: "–ï–≤–∞", text: "–Ø —á—ë—Ç–∫–æ –ø–æ–º–Ω—é –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –ø–∞–ø—É –≤—ã–≤–æ–¥–∏–ª–∏ –≤ –Ω–∞—Ä—É—á–Ω–∏–∫–∞—Ö, —è –ø–ª–∞–∫–∞–ª–∞, –≥–æ–≤–æ—Ä–∏–ª–∞ —á—Ç–æ –æ–Ω –Ω–µ –≤–∏–Ω–æ–≤–∞—Ç, –Ω–æ –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –æ–Ω –±—ã–ª —Ä–µ–∞–ª—å–Ω–æ –º–∞–Ω—å—è–∫–æ–º" },
            { name: "–í—ã", text: "–ï—Å–ª–∏ –æ–Ω —É—Å–ø–µ–ª —É–±–∏—Ç—å 5 —á–µ–ª–æ–≤–µ–∫, —Ç–æ –≥–¥–µ –±—ã–ª–∞ –ø–æ–ª–∏—Ü–∏—è?" },
            { name: "–ï–≤–∞", text: "–ú–æ–π –ø–∞–ø–∞ –±—ã–ª –≥–µ–Ω–∏–µ–º, –æ–Ω –ø—Ä—è—Ç–∞–ª —Ç–µ–ª–∞ –¥–µ—Ç–µ–π –≤ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤, —Ç—É–¥–∞ –≤–Ω—É—Ç—Ä—å, –∞ —Ç–µ–ª–æ –º–∞–º—ã –≤ –∫–ª–∞–¥–æ–≤–∫–µ, –∏ —á—Ç–æ–±—ã —Ç–µ–ª–∞ –Ω–µ –∑–∞–≤–æ–Ω—è–ª–∏—Å—å, –≤ –∑–∞–≤–µ–¥–µ–Ω–∏–∏ –±—ã–ª–∞ –ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞" },
            { name: "–í—ã", text: "–ê –ø–æ—á–µ–º—É –¥–æ —Å–∏—Ö –ø–æ—Ä —Ö–æ–ª–æ–¥–Ω–æ, –æ–Ω–∏ —á—Ç–æ —Ç–∞–º –µ—â—ë –ª–µ–∂–∞—Ç?" },
            { name: "–ï–≤–∞", text: "–î–∞..." },
            { name: "–í—ã", text: "..." },
            { name: "–ï–≤–∞", text: "–ò–∑-–∑–∞ —Ö–∞–ª–∞—Ç–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—Å—Ç–≤–∏—è, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É–±–∏–π—Å—Ç–≤–∞ –¥–µ—Ç–µ–π –Ω–µ –±—ã–ª–∏ –¥–æ–∫–∞–∑–∞–Ω—ã, –Ω–æ –≤—Å–µ —É–±–∏–π—Å—Ç–≤–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Å–∏–ª–∏ –Ω–∞ –º–æ–µ–≥–æ –ø–∞–ø—É, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º—ã–π" },
            { name: "–í—ã", text: "–ê –∫–∞–∫ –ø–æ–ª–∏—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ —Ç–µ–ª–∞?" },
            { name: "–ï–≤–∞", text: "–¢–µ–ª–∞ –¥–µ—Ç–µ–π –Ω–µ —Å–º–æ–≥–ª–∞, –∞ —Ç–µ–ª–æ –º–æ–µ–π –º–∞–º—ã —Å–º–æ–≥–ª–∏. –í –æ–¥–∏–Ω —à—Ç–∞—Ç–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å, —Å–∏—Å—Ç–µ–º–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è —Å–ª–æ–º–∞–ª–∞—Å—å, –ø–∞–ø–∞ –≤ –∏—Ç–æ–≥–µ –µ—ë —É—Å–ø–µ–ª –ø–æ—á–∏–Ω–∏—Ç—å, –Ω–æ –±—ã–ª–æ –ø–æ–∑–¥–Ω–æ" },
            { name: "–ï–≤–∞", text: "–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –ø–æ–∂–∞–ª–æ–≤–∞–ª–∏—Å—å –Ω–∞ —Ç—Ä—É–ø–Ω—ã–π –∑–∞–ø–∞—Ö, –∏ –ø—Ä–∏–µ—Ö–∞–ª–∞ –ø–æ–ª–∏—Ü–∏—è, –Ω—É –∏ –≤—Å—ë" },
            { name: "–í—ã", text: "–≠—Ç–æ –∂–µ—Å—Ç—å –ï–≤–∞..." },
            { name: "–í—ã", text: "–ï–≤–∞, —è –æ–±–µ—â–∞—é —É –Ω–∞—Å –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è, –º—ã –ø—Ä–æ–∂–∏–≤—ë–º —ç—Ç–æ—Ç –∫–æ—à–º–∞—Ä, —É –Ω–∞—Å –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ –±—É–¥–µ—Ç, –ª–∞–¥–Ω–æ –º–Ω–µ –ø–æ—Ä–∞ –∏–¥—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É" },
            { name: "–ï–≤–∞", text: "–£–¥–∞—á–∏" },
        ]
    },
    4: {
        character: "eva_4.gif",
        lines: [
            { name: "–ï–≤–∞", text: "–û –ø—Ä–∏–≤–µ—Ç, –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ?" },
            { name: "–í—ã", text: "–ù–µ –æ—Å–æ–±–æ" },
            { name: "–ï–≤–∞", text: "–î–∞ –Ω–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, –µ—Å–ª–∏ —Ç—ã —Ç—Ä–∏ —Ä–∞–∑–∞ —Å–º–æ–≥, —Ç–æ –∏ —á–µ—Ç–≤—ë—Ä—Ç—ã–π —Å–º–æ–∂–µ—à—å" },
            { name: "–í—ã", text: "–°–ª—É—à–∞–π, –∑–Ω–∞–µ—à—å, —è –≤—Å—ë –≤—Ä–µ–º—è –¥—É–º–∞—é –æ —Ç–æ–º —Å —Ç–æ–±–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –∏ –æ —Ç–æ–º, —á—Ç–æ —Ç—ã –º–Ω–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∞" },
            { name: "–í—ã", text: "–¢–∞–∫ –∂–∞–ª—å —ç—Ç–∏—Ö –¥–µ—Ç–µ–π, —á—Ç–æ –ø–æ–≥–∏–±–ª–∏, —è —Ä–∞–∑–≥–ª—è–¥—ã–≤–∞–ª –∏—Ö —Ä–∏—Å—É–Ω–∫–∏ –≤ –∑–¥–∞–Ω–∏–∏, —ç—Ç–æ –Ω–∞–≤–µ—Ä–Ω–æ–µ –∏—Ö –¥–∞?" },
            { name: "–ï–≤–∞", text: "–°–∫–æ—Ä–µ–µ –Ω–µ—Ç, —è –∫–æ–Ω–µ—á–Ω–æ –ø–ª–æ—Ö–æ –ø–æ–º–Ω—é, –Ω–æ –µ—Å–ª–∏ —Ç—ã –ø—Ä–æ –æ—Ñ–∏—Å, —Ç–æ —Ç–∞–º —Ç–æ–ª—å–∫–æ –º–æ–∏ —Ä–∏—Å—É–Ω–∫–∏, —è –∏—Ö —Å–∞–º–∞ —Ä–∏—Å–æ–≤–∞–ª–∞ –≤ –¥–µ—Ç—Å—Ç–≤–µ" },
            { name: "–ï–≤–∞", text: "–û–±—ã—á–Ω—ã—Ö –¥–µ—Ç–µ–π –Ω–µ –ø—É—Å–∫–∞–ª–∏ –≤ –æ—Ñ–∏—Å, –Ω–æ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–æ–º –±—ã–ª –º–æ–π –¥—è–¥—è, —è —á–∞—Å—Ç–æ —Ç–∞–º —Å–∏–¥–µ–ª–∞, —Ç–∞–∫ –∫–∞–∫ –Ω—Ä–∞–≤–∏–ª–æ—Å—å —Å–ª–µ–¥–∏—Ç—å –∑–∞ –º–æ–Ω–∏—Ç–æ—Ä–∞–º–∏" },
            { name: "–ï–≤–∞", text: "–ò –æ—Ö—Ä–∞–Ω–Ω–∏–∫ —Ä–∞–∑—Ä–µ—à–∞–ª –≤–µ—à–∞—Ç—å —Ä–∏—Å—É–Ω–∫–∏, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∏—Ö –∫—É–¥–∞ –±–æ–ª—å—à–µ –±—ã–ª–æ, –Ω–æ –≤–∞–Ω–¥–∞–ª—ã –º–Ω–æ–≥–æ–µ –∏—Å–ø–æ—Ä—Ç–∏–ª–∏" },
            { name: "–í—ã", text: "–ü–æ–Ω—è–ª, —è –≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞—é –∫–∞–∫ —ç—Ç–∏ —Å—Ç—Ä–∞—à–∏–ª—ã –º–æ–≥–ª–∏ –Ω—Ä–∞–≤—è—Ç—Å—è –¥–µ—Ç—è–º" },
            { name: "–ï–≤–∞", text: "–ù—É –∑–Ω–∞–µ—à—å, —Ä–∞–Ω—å—à–µ –æ–Ω–∏ –±—ã–ª–∏ –∫—Ä–∞—Å–∏–≤–µ–µ –Ω–∞–º–Ω–æ–≥–æ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –±—ã–ª–∏ –ø–æ–ª–æ–º–∞–Ω–Ω—ã–µ –∏ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –±–ª–µ—Å—Ç–µ–ª–æ –æ—Ç —á–∏—Å—Ç–æ—Ç—ã" },
            { name: "–ï–≤–∞", text: "–ü–ª—é—Å —è –ª–∏—á–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ –Ω–∞—Ö–æ–¥—è—Å—å –∑–¥–µ—Å—å, –Ω–µ –º–æ–≥—É –æ–ø–∏—Å–∞—Ç—å —ç—Ç–æ —á—É–≤—Å—Ç–≤–æ" },
            { name: "–í—ã", text: "–ü–æ–Ω—è–ª —Ç–µ–±—è, –∞ —Ç—ã –≤–æ–æ–±—â–µ –∫–∞–∫, –∫–∞–∫ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ?" },
            { name: "–ï–≤–∞", text: "–£–∂–µ –ª—É—á—à–µ, —è —á—É–≤—Å—Ç–≤—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤ –≤–∏–¥–µ —Ç–µ–±—è" },
            { name: "–í—ã", text: "–ü—Ä–∏—è—Ç–Ω–æ, –ª–∞–¥–Ω–æ, —É–∂–µ –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—á—å, –º–Ω–µ –Ω—É–∂–Ω–æ —É—Å–ø–µ—Ç—å –ø–æ–ø–∞—Å—Ç—å –≤ –æ—Ñ–∏—Å, –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ —Å—Ç–∞–ª–∏ –∑–ª—ã–º–∏" },
            { name: "–ï–≤–∞", text: "–î–∞–≤–∞–π –±–µ–≥–∏" },

        ]
    },
    5: {
        character: "eva_5.gif",
        lines: [
            { name: "–í—ã", text: "–ù—É –ø—Ä–∏–≤–µ—Ç" },
            { name: "–ï–≤–∞", text: "–ü–æ—á–µ–º—É —Ç—ã —Ç–∞–∫–æ–π –≥—Ä—É—Å—Ç–Ω—ã–π?" },
            { name: "–í—ã", text: "–ê —Ç—ã —á—Ç–æ —Ç–∞–∫–∞—è –≤–µ—Å—ë–ª–∞—è?" },
            { name: "–ï–≤–∞", text: "–ù—É —É –º–µ–Ω—è –µ—Å—Ç—å –ø–æ–≤–æ–¥, –∑–¥–∞–Ω–∏–µ —Ö–æ—Ç—è—Ç –∫—É–ø–∏—Ç—å, —É–∂–µ —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ —Ç–≤–æ–µ–π —Å–º–µ–Ω—ã –º—ã –∏–¥—ë–º –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã" },
            { name: "–í—ã", text: "–ì–æ—Å–ø–æ–¥–∏, —É—Ä–∞, —ç—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å?" },
            { name: "–ï–≤–∞", text: "–î–∞, –ø–æ–∑–¥—Ä–∞–≤–ª—è—é —Ç–µ–±—è, –≤ –æ–±—â–µ–º —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å" },
            { name: "–ï–≤–∞", text: "–°–º–æ—Ç—Ä–∏ –Ω–µ –æ—à–∏–±–∏—Å—å, —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∂–∏–≤–∞—é –∑–∞ —Ç–µ–±—è, –¥–∞–≤–∞–π –º—ã —Å–º–æ–∂–µ–º" },
            { name: "–ï–≤–∞", text: "–ü—Ä–µ–¥–ª–∞–≥–∞—é –∫—Å—Ç–∞—Ç–∏ —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º —Å—Ö–æ–¥–∏—Ç—å –∫—É–¥–∞-–Ω–∏–±—É–¥—å, –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –ø–æ–±–ª–∏–∂–µ –∏ –æ—Ç–ø—Ä–∞–∑–¥–Ω–æ–≤–∞—Ç—å —ç—Ç—É –ø–æ–±–µ–¥—É!" },
            { name: "–í—ã", text: "–î–∞, —Ä–µ–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ, —è –Ω–∞ —É–ª–∏—Ü–µ –ü–ª–∞—Ç–æ–≤–∞ –∑–Ω–∞—é –æ—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–µ—á–∫–æ" },
            { name: "–ï–≤–∞", text: "–ù—É –≤–æ—Ç, —Ç—É–¥–∞ –∏ –ø–æ–π–¥—ë–º" },
            { name: "–ï–≤–∞", text: "–í—Å—ë, –¥–∞–≤–∞–π –¥–æ –≤–µ—á–µ—Ä–∞, —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –∫–ª–∞—Å—Å–Ω—ã–π –¥–µ–Ω—å" },
            { name: "–í—ã", text: "–û—Ç–ª–∏—á–Ω–æ, —É–≤–∏–¥–∏–º—Å—è" },
        ]
    }
};

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏
let currentDialogIndex = 0;
let currentNightDialog = null;

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–µ—Ä–µ–¥ –Ω–æ—á—å—é
function showNightDialog(nightNumber) {
    if (!nightDialogs[nightNumber]) {
        startGameAfterDialog();
        return;
    }

    currentNightDialog = nightDialogs[nightNumber];
    currentDialogIndex = 0;
    
    const dialogOverlay = document.getElementById('dialogOverlay');
    const dialogCharacter = document.getElementById('dialogCharacter');
    const dialogName = document.getElementById('dialogName');
    const dialogText = document.getElementById('dialogText');
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    dialogCharacter.src = currentNightDialog.character;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–∏–∞–ª–æ–≥
    showNextDialogLine();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º overlay
    dialogOverlay.style.display = 'flex';
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –¥–∏–∞–ª–æ–≥—É
    dialogOverlay.onclick = function() {
        clickSound.play();
        showNextDialogLine();
    };
}

function showNextDialogLine() {
    if (currentDialogIndex < currentNightDialog.lines.length) {
        const line = currentNightDialog.lines[currentDialogIndex];
        document.getElementById('dialogName').textContent = line.name;
        document.getElementById('dialogText').textContent = line.text;
        currentDialogIndex++;
    } else {
        // –í—Å–µ –¥–∏–∞–ª–æ–≥–∏ –ø–æ–∫–∞–∑–∞–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É
        startGameAfterDialog();
    }
}

function startGameAfterDialog() {
    const dialogOverlay = document.getElementById('dialogOverlay');
    dialogOverlay.style.display = 'none';
    dialogOverlay.onclick = null;
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–µ—Ä–µ—Ö–æ–¥–∞
    const fadeOverlay = document.createElement('div');
    fadeOverlay.className = 'fade-overlay';
    fadeOverlay.style.zIndex = '2001';
    document.body.appendChild(fadeOverlay);
    
    fadeOverlay.style.opacity = '1';
    
    setTimeout(() => {
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É –ø–æ—Å–ª–µ –¥–∏–∞–ª–æ–≥–æ–≤
        startNightGameplay(currentNight.number);
        
        setTimeout(() => {
            fadeOverlay.style.opacity = '0';
            setTimeout(() => {
                fadeOverlay.remove();
            }, 1000);
        }, 500);
    }, 500);
}

        function startNight(nightNumber) {
    currentNight = {
        number: nightNumber,
        randomSoundInterval: null,
        hourInterval: null
    };

    menuSound.pause();
    menuSound.currentTime = 0;
    musicBoxSound.pause();
    musicBoxSound.currentTime = 0;
    
    nightsMenu.style.opacity = '0';
    nightsMenu.style.transition = 'opacity 1s';
    
    setTimeout(() => {
        nightsMenu.style.display = 'none';
        body.classList.add('night-mode');
        body.style.backgroundImage = "none";
        
        // –í–º–µ—Å—Ç–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥–∏
        showNightDialog(nightNumber);
    }, 1000);
}

// –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ—Å–ª–µ –¥–∏–∞–ª–æ–≥–æ–≤
function startNightGameplay(nightNumber) {
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–≤—É–∫–æ–≤
    const randomSound = document.getElementById('randomSound');
    randomSound.volume = 0.5;

    const randomSoundInterval = setInterval(() => {
        if (Math.random() < 0.10) {
            if (randomSound.paused) {
                randomSound.currentTime = 0;
                randomSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Å–ª—É—á–∞–π–Ω—ã–π –∑–≤—É–∫:", e));
            }
        }
    }, 10000);

    currentNight.randomSoundInterval = randomSoundInterval;
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –æ—Ñ–∏—Å–∞
    officeSound.currentTime = 0;
    officeSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –æ—Ñ–∏—Å–∞:", e));
    
    setTimeout(() => {
        gameScreen.style.backgroundImage = "url('office.gif')";
        gameScreen.style.backgroundSize = "cover";
        gameScreen.style.display = "block";
        gameScreen.classList.add("fade-in");
        
        // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
        createActionButtons();
        startPuppetMechanic();
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —á–∞—Å—ã
        currentNight.hourInterval = startGameClock(nightNumber);
        
        console.log(`–ù–∞—á–∞–ª–∞—Å—å –Ω–æ—á—å ${nightNumber}!`);
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 15-120 —Å–µ–∫—É–Ω–¥
        const firstSpawnTime = Math.random() * 105000 + 15000;
        animatronicTimer = setTimeout(() => {
            if (gameScreen.style.display === 'block' && !isInCloset) {
                spawnAnimatronic();
            }
        }, firstSpawnTime);
    }, 500);
}

function createActionButtons() {
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫
    buttonContainer = document.createElement('div');
    buttonContainer.className = 'button-container';
    
    // –ö–Ω–æ–ø–∫–∞ –∫–∞–º–µ—Ä—ã
    cameraBtn = document.createElement('button');
    cameraBtn.className = 'action-btn';
    cameraBtn.textContent = '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–º–µ—Ä—É';
    cameraBtn.addEventListener('click', toggleCamera);
    
    // –ö–Ω–æ–ø–∫–∞ —à–∫–∞—Ñ–∞
    closetBtn = document.createElement('button');
    closetBtn.className = 'action-btn';
    closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
    closetBtn.addEventListener('click', toggleCloset);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    buttonContainer.appendChild(cameraBtn);
    buttonContainer.appendChild(closetBtn);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ gameScreen
    gameScreen.appendChild(buttonContainer);
    
    // –°–æ–∑–¥–∞–µ–º overlay –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
    fadeOverlay = document.createElement('div');
    fadeOverlay.className = 'fade-overlay';
    gameScreen.appendChild(fadeOverlay);
}


function toggleCloset() {
    // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (–∏–¥–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—è) - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
    if (closetBtn.disabled) return;
    
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
    cameraBtn.disabled = true;
    closetBtn.disabled = true;
    
    clickSound.play();
    
    if (isInCloset) {
        exitCloset();
    } else {
        hideInCloset();
    }
    
    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (1000ms)
    setTimeout(() => {
        cameraBtn.disabled = false;
        closetBtn.disabled = false;
    }, 1000);
}

function hideInCloset() {
    isInCloset = true;
    closetBtn.textContent = '–í—ã–π—Ç–∏ –∏–∑ —à–∫–∞—Ñ–∞';
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è
    fadeOverlay.style.opacity = '1';
    
    setTimeout(() => {
        // –ú–µ–Ω—è–µ–º —Ñ–æ–Ω –Ω–∞ officesave.gif
        gameScreen.style.backgroundImage = "url('officesave.gif')";
        
        // –ü—Ä—è—á–µ–º –∫–Ω–æ–ø–∫—É –∫–∞–º–µ—Ä—ã
        cameraBtn.style.display = 'none';
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
        fadeOverlay.style.opacity = '0';
        
        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã
        const savezoneSound = document.getElementById('savezoneSound');
        savezoneSound.loop = true;
        savezoneSound.volume = 0.5;
        savezoneSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã:", e));
        
        // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –º–µ—Ö–∞–Ω–∏–∫—É –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏, –Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        const meterContainer = document.querySelector('.puppet-meter-container');
        const puppetBtn = document.querySelector('.puppet-button');
        if (meterContainer) meterContainer.style.display = 'none';
        if (puppetBtn) puppetBtn.style.display = 'none';
        
        // 1% —à–∞–Ω—Å –±—ã—Ç—å –∞—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–º –¥–∞–∂–µ –≤ —à–∫–∞—Ñ—É
        if (Math.random() < 0.01 && currentAnimatronic) {
            setTimeout(() => {
                triggerScreamer();
            }, 1000);
        } else {
            // –ê–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∏ —É—Ö–æ–¥—è—Ç
            if (currentAnimatronic) {
                const animElement = document.querySelector('.animatronic');
                if (animElement) animElement.remove();
                currentAnimatronic = null;
            }
            
            // –û–Ω–∏ –≤–µ—Ä–Ω—É—Ç—Å—è —á–µ—Ä–µ–∑ 15-120 —Å–µ–∫—É–Ω–¥
            closetTimer = setTimeout(() => {
                if (isInCloset && gameScreen.style.display === 'block') {
                    spawnAnimatronic();
                }
            }, Math.random() * 15000 + 120000);
        }
    }, 1000);
}

function exitCloset() {
    isInCloset = false;
    closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã
    const savezoneSound = document.getElementById('savezoneSound');
    savezoneSound.pause();
    savezoneSound.currentTime = 0;
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–º–µ—Ä—É, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞
    if (isCameraOpen) {
        closeCamera();
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è
    fadeOverlay.style.opacity = '1';
    
    setTimeout(() => {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω—ã–π —Ñ–æ–Ω
        gameScreen.style.backgroundImage = "url('office.gif')";
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∫–∞–º–µ—Ä—ã
        cameraBtn.style.display = 'block';
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
        fadeOverlay.style.opacity = '0';
        
        // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä —à–∫–∞—Ñ–∞
        if (closetTimer) {
            clearTimeout(closetTimer);
            closetTimer = null;
        }
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏, –µ—Å–ª–∏ –∫–∞–º–µ—Ä–∞ –æ—Ç–∫—Ä—ã—Ç–∞
        if (isCameraOpen) {
            const meterContainer = document.querySelector('.puppet-meter-container');
            const puppetBtn = document.querySelector('.puppet-button');
            if (meterContainer) {
                meterContainer.style.display = 'block';
                updatePuppetMeter();
            }
            if (puppetBtn) puppetBtn.style.display = 'block';
        }
        
        // –ê–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∏ –º–æ–≥—É—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
        const spawnTime = Math.random() * 30000 + 15000; // –æ—Ç 15 –¥–æ 45 —Å–µ–∫—É–Ω–¥
        animatronicTimer = setTimeout(() => {
            if (gameScreen.style.display === 'block' && !isInCloset) {
                spawnAnimatronic();
            }
        }, spawnTime);
    }, 1000);
}


function spawnAnimatronic() {
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤—Å–µ –µ—â–µ –≤ –∏–≥—Ä–µ (–∞ –Ω–µ –≤ –º–µ–Ω—é) –∏ –Ω–µ –≤ —à–∫–∞—Ñ—É
    if (gameScreen.style.display !== 'block' || isInCloset) return;
    
    if (currentAnimatronic) {
        const existing = document.querySelector('.animatronic');
        if (existing) existing.remove();
        currentAnimatronic = null;
    }
    
    const random = Math.random();
    let cumulativeChance = 0;
    let selected = null;
    
    for (const anim of animatronics) {
        cumulativeChance += anim.chance;
        if (random <= cumulativeChance) {
            selected = anim;
            break;
        }
    }
    
    if (!selected) selected = animatronics[0];
    
    const animElement = document.createElement('img');
    animElement.src = selected.image;
    animElement.className = 'animatronic';
    animElement.style.position = 'absolute';
    animElement.style.top = '0';
    animElement.style.left = '0';
    animElement.style.width = '100%';
    animElement.style.height = '100%';
    animElement.style.objectFit = 'cover';
    animElement.style.zIndex = '100';
    
    gameScreen.appendChild(animElement);
    currentAnimatronic = selected;
    
    // –í—Ä–µ–º—è –¥–æ –∞—Ç–∞–∫–∏ (4 —Å–µ–∫—É–Ω–¥)
    attackTimer = setTimeout(() => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤—Å–µ –µ—â–µ –≤ –∏–≥—Ä–µ
        if (gameScreen.style.display === 'block') {
            triggerScreamer();
        }
    }, 4000);
    
    // –°–ª–µ–¥—É—é—â–µ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ 15-120 —Å–µ–∫—É–Ω–¥
    const nextSpawnTime = Math.random() * 105000 + 15000; // –æ—Ç 15 –¥–æ 120 —Å–µ–∫—É–Ω–¥
    animatronicTimer = setTimeout(() => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤—Å–µ –µ—â–µ –≤ –∏–≥—Ä–µ
        if (gameScreen.style.display === 'block') {
            spawnAnimatronic();
        }
    }, nextSpawnTime);
}

function triggerScreamer() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤—Å–µ –µ—â–µ –≤ –∏–≥—Ä–µ
    if (gameScreen.style.display !== 'block' || !currentAnimatronic) return;
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã, –µ—Å–ª–∏ –æ–Ω –∏–≥—Ä–∞–µ—Ç
    const savezoneSound = document.getElementById('savezoneSound');
    savezoneSound.pause();
    savezoneSound.currentTime = 0;
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∞ –∏–≥—Ä–∞–µ—Ç
    musicBoxSound.pause();
    musicBoxSound.currentTime = 0;
    
    const animElement = document.querySelector('.animatronic');
    if (animElement) animElement.remove();
    
    const screamer = document.createElement('img');
    screamer.src = currentAnimatronic.screamer;
    screamer.className = 'screamer';
    screamer.style.position = 'absolute';
    screamer.style.top = '0';
    screamer.style.left = '0';
    screamer.style.width = '100%';
    screamer.style.height = '100%';
    screamer.style.objectFit = 'cover';
    screamer.style.zIndex = '1000';
    
    gameScreen.appendChild(screamer);
    
    screamerSound.currentTime = 0;
    screamerSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —Å–∫—Ä–∏–º–µ—Ä–∞:", e));
    
    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    if (closetTimer) clearTimeout(closetTimer);
    
    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
    if (currentNight) {
        if (currentNight.hourInterval) clearInterval(currentNight.hourInterval);
        if (currentNight.randomSoundInterval) clearInterval(currentNight.randomSoundInterval);
    }
    
    setTimeout(() => {
        gameScreen.style.display = 'none';
        nightsMenu.style.display = 'flex';
        nightsMenu.style.opacity = '1';
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –º–µ–Ω—é
        body.style.backgroundImage = "url('menu.gif')";
        body.classList.remove('night-mode');
        
        const existingScreamer = document.querySelector('.screamer');
        if (existingScreamer) existingScreamer.remove();
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∑–≤—É–∫–∏ –∏–≥—Ä—ã
        officeSound.pause();
        officeSound.currentTime = 0;
        
        // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –º–µ–Ω—é
        menuSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –º–µ–Ω—é:", e));
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∫–∞—Ñ–∞
        isInCloset = false;
        if (buttonContainer && closetBtn) {
            closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
        }
        if (buttonContainer && cameraBtn) {
            cameraBtn.style.display = 'block';
            cameraBtn.textContent = '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–º–µ—Ä—É';
        }
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–µ—Ö–∞–Ω–∏–∫—É –º–∞—Ä–∏–æ–Ω–µ—Ç–∫–∏
        resetPuppetMechanic();
    }, 1500);
}

function clearProgress() {
    // –û—á–∏—â–∞–µ–º LocalStorage
    localStorage.removeItem('fnafProgress');
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    progress = 1;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–æ—á–µ–π
    const nightButtons = document.querySelectorAll('.night-btn');
    nightButtons.forEach((btn, index) => {
        if (index === 0) { // –ü–µ—Ä–≤–∞—è –Ω–æ—á—å –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞
            btn.classList.remove('locked');
            btn.classList.add('available');
            btn.innerHTML = `
                <div class="night-number">1</div>
                <div class="night-title">–ù–û–ß–¨ 1</div>
            `;
            btn.addEventListener('click', function() {
                startNight(1);
            });
        } else { // –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–æ—á–∏ –±–ª–æ–∫–∏—Ä—É–µ–º
            btn.classList.remove('available');
            btn.classList.add('locked');
            btn.innerHTML = `
                <div class="night-number">${index + 1}</div>
                <div class="night-title">–ù–û–ß–¨ ${index + 1}</div>
            `;
            // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ—á–µ–π
            btn.onclick = null;
            btn.addEventListener('click', function() {
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–≤—É–∫ "–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ" –∏–ª–∏ –¥—Ä—É–≥–æ–π —ç—Ñ—Ñ–µ–∫—Ç
            });
        }
    });
    
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –æ—á–∏—Å—Ç–∫–∏ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π clickSound)
    clickSound.currentTime = 0;
    clickSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫:", e));
}

        function completeNight(nightNumber) {
    resetPuppetMechanic();
    // –û—á–∏—â–∞–µ–º –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã
    if (animatronicTimer) clearTimeout(animatronicTimer);
    if (attackTimer) clearTimeout(attackTimer);
    if (closetTimer) clearTimeout(closetTimer);

    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª —á–∞—Å–æ–≤
    if (currentNight && currentNight.hourInterval) {
        clearInterval(currentNight.hourInterval);
    }

    // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–≤—É–∫–æ–≤
    if (currentNight && currentNight.randomSoundInterval) {
        clearInterval(currentNight.randomSoundInterval);
    }

    // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∏ –∏ —Å–∫—Ä–∏–º–µ—Ä—ã
    const existingAnim = document.querySelector('.animatronic');
    if (existingAnim) existingAnim.remove();
    const existingScreamer = document.querySelector('.screamer');
    if (existingScreamer) existingScreamer.remove();

    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã
    const savezoneSound = document.getElementById('savezoneSound');
    savezoneSound.pause();
    savezoneSound.currentTime = 0;

    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –∫–∞–º–µ—Ä—ã
    musicBoxSound.pause();
    musicBoxSound.currentTime = 0;

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å, –µ—Å–ª–∏ –Ω–æ—á—å –ø—Ä–æ–π–¥–µ–Ω–∞
    if (nightNumber >= progress) {
        progress = nightNumber + 1;
        localStorage.setItem('fnafProgress', progress);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–æ—á–µ–π
        const nightButtons = document.querySelectorAll('.night-btn');
        nightButtons.forEach((btn, index) => {
            if (index + 1 <= progress) {
                btn.classList.remove('locked');
                btn.classList.add('available');
                btn.innerHTML = `
                    <div class="night-number">${index + 1}</div>
                    <div class="night-title">–ù–û–ß–¨ ${index + 1}</div>
                `;
                btn.addEventListener('click', function() {
                    startNight(index + 1);
                });
            }
        });
    }
    
    // –°–æ–∑–¥–∞–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–∏—Ñ–∫—É –ø–æ–±–µ–¥—ã
    const winGif = document.createElement('div');
    winGif.style.position = 'fixed';
    winGif.style.top = '0';
    winGif.style.left = '0';
    winGif.style.width = '100%';
    winGif.style.height = '100%';
    winGif.style.backgroundImage = `url('${WIN_GIFS[nightNumber]}')`;
    winGif.style.backgroundSize = 'cover';
    winGif.style.backgroundPosition = 'center';
    winGif.style.zIndex = '2000';
    document.body.appendChild(winGif);
    
    // –ß–µ—Ä–µ–∑ 20 —Å–µ–∫—É–Ω–¥ —É–±–∏—Ä–∞–µ–º –≥–∏—Ñ–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é
    setTimeout(() => {
        winGif.remove();
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –º–µ–Ω—é
        body.style.backgroundImage = "url('menu.gif')";
        body.classList.remove('night-mode');
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫–∏ –æ—Ñ–∏—Å–∞
        officeSound.pause();
        officeSound.currentTime = 0;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –Ω–æ—á–∏
        gameScreen.style.display = 'none';
        nightsMenu.style.display = 'flex';
        nightsMenu.style.opacity = '1';
        
        // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –º–µ–Ω—é
        menuSound.play().catch(e => console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É –º–µ–Ω—é:", e));
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∫–∞—Ñ–∞
        isInCloset = false;
        if (buttonContainer && closetBtn) {
            closetBtn.textContent = '–°–ø—Ä—è—Ç–∞—Ç—å—Å—è –≤ —à–∫–∞—Ñ—É';
        }
        if (buttonContainer && cameraBtn) {
            cameraBtn.style.display = 'block';
        }
    }, 15000);
}

        aboutBtn.addEventListener('click', function() {
            aboutOverlay.style.display = 'flex';
        });

        closeBtn.addEventListener('click', function() {
            aboutOverlay.style.display = 'none';
        });

        aboutOverlay.addEventListener('click', function(e) {
            if (e.target === aboutOverlay) {
                aboutOverlay.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>